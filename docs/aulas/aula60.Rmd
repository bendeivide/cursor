---
title: "Curso R: Programação em R (Nível Intermediário)"
subtitle: "Aula 60 - Programação funcional: funções recursivas"
author: "Ben Dêivide"
bibliography: biblio.bib
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: 
  ioslides_presentation: 
    smaller: yes
    transition: slower
    logo: logo2.png
    css: style-cursor-ni2.css
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
# Links
rlink <- "[R](http://r-project.org/){target='_blank'}"
rstudio <- "[RStudio](http://rstudio.org/){target='_blank'}"
cran <- "[CRAN](http://cran.r-project.org/){target='_blank'}"
github <- "[GitHub](http://github.com/){target='_blank'}"
```


<!--
YAML:
date: "`r format(Sys.time(), '%d %B, %Y')`"
=====
APRESENTACAO:

Inserir nas secoes:
{data-background=boards.jpg data-background-size=cover}
-->


## Selo DC

<center>
[![](SeloDC-preto.png){height=300 width=300}](https://bendeivide.github.io/dc/){target="_blank"}
</center>

## Introdução

- Recursão: refere-se a capacidade que uma função tem de chamar a si própria, no corpo de sua própria função
- Evita *loops*
- Torna o código mais curto e limpo;
- Solução simples para alguns problemas;
- Entretanto, pode ser mais complexo o entendimento!


## Exemplo do fatorial

$$
5! = 5 \times 4 \times 3 \times 2 \times 1  = 120
$$
$$
1! = 0! = 1
$$
Na prática: $f(n) = n \times (n - 1) \times (n - 2) ...$

## Implementando essa função em R

- No `r rlink` já existe `factorial()`!
- De forma didática temos duas implementações:

```{r echo=TRUE, include=TRUE}
fatorial1 <- function(n) {
  if (!is.numeric(n)) stop("n deve ser numérico!", call. = FALSE)
  if (n == 0 || n == 1) return(1)
  prod(1:n)
}

fatorial2 <- function(n) {
  if (!is.numeric(n)) stop("n deve ser numérico!", call. = FALSE)
  if (n == 0 || n == 1) return(1)
  # Usando o loop
  aux <- 1
  for(i in 2:n) {
    aux <- i * aux
  } 
  return(aux)
}
```

## Executando as funções criadas

```{r echo=TRUE, include=TRUE}
factorial(5)
fatorial1(5)
fatorial2(5)
```

## Implementando agora de forma recursiva

Exemplo anterior:
$$
\begin{align*}
5! & = 5 & \times & 4 & \times & 3 & \times & 2 & \times & 1\\
f(n) & = n & \times &  n - 1 & \times & (n - 1) - 1 & \times & (n - 2) - 1 & \times & (n - 3) - 1\\
\end{align*}
$$
Em `r rlink`:

```{r echo=TRUE, include=TRUE}
fatorial3 <- function(n) {
  if (!is.numeric(n)) stop("n deve ser numérico!", call. = FALSE)
  if (n == 0 || n == 1) return(1)
  return(n * fatorial3(n - 1))
}
```

## Entendo o código para $5!$ 

```{r echo=TRUE, include=TRUE, eval=FALSE}
# Chamando fatorial3(5)
fatorial3(5)
# O que ocorre nos bastidores do R
fatorial3(5)
   |
   --> 5 * fatorial3(4)
              |
              --> 4 * fatorial3(3)
                         |
                         --> 3 * fatorial3(2)
                                    |
                                    --> 2 * fatorial3(1)
                                               |
                                               --> 1 * return(1) # Importantíssimo!
                                                         |
                                                         --> fechamento de fatorial3()
```

```{r echo=TRUE, include=TRUE}
fatorial3(5)
```

## Bons estudos!

<center>
[![](logo2.png){height=500 width=500}](https://bendeivide.github.io/courses/cursor/){target="_blank"}
</center>
